# 📌C++ 中的内联函数（Inline Function）

在 c/c++ 中，为了解决一些频繁调用的小函数大量消耗栈空间（栈内存）的问题，特别的引入了 inline修饰符，表示为内联函数。内联函数是一种在编译时由编译器将函数调用替换为函数体的特殊函数。通过这种替换，可以减少函数调用带来的额外开销，从而提升程序的执行效率。

### 🛠 内联函数的定义

```cpp
        inline int add(int a, int b) {
            return a + b;
        }

        int main() {
            int result = add(2, 3);  // 在编译时，add(2, 3) 直接被替换为 "2 + 3"
            return 0;
        }
```

### ⚙️ 内联函数的工作原理

当你将函数声明为内联时，编译器会在调用函数的地方，将函数的代码内联替换到调用位置，而不是进行常规的函数调用（即压栈、跳转和返回等操作）。

### 🚀 为什么要有内联函数？
1. 提高性能：
避免了函数调用的开销（如压栈、跳转、返回等），在某些性能敏感的场景下能提升效率，尤其是短小的函数。

2. 简化代码：
内联函数可以提高代码可读性，避免了重复的代码块，而又不会牺牲性能。

3. 替代宏定义：
内联函数比宏定义更安全，具有类型检查和作用域等优点。

### ⚠️ 内联函数的注意事项
1. 编译器不一定会内联：
内联是编译器的建议，编译器可能会忽略 inline 关键字，尤其是当函数体较大或复杂时。

2. 递归函数无法内联：
编译器无法对递归调用进行内联替换。

3. 增加代码体积：
如果内联函数被多次调用，每次调用都被替换成函数体，可能导致生成的代码体积变大（代码膨胀）。

4. 应避免将大函数设为内联：
过大的内联函数会导致代码膨胀，反而影响性能。

<br/>

# 📌 匿名函数（Lambda 表达式）
在 C++ 中，匿名函数指的是没有名称的函数，也称为 Lambda 表达式。匿名函数通常用于定义短小、临时的函数，而不需要为它们命名，适合在需要简单逻辑且不想创建独立函数的场景中使用。

C++11 开始引入了 Lambda 表达式，大大提高了代码的简洁性和灵活性。

### ⚙️ Lambda 表达式的基本语法
```cpp
[捕获列表](参数列表) -> 返回类型 {
    函数体
};
```
各部分说明：
1. 捕获列表 [ ]：定义 Lambda 访问外部作用域变量的方式。
2. 参数列表 ( )：定义传递给 Lambda 的参数（类似普通函数参数）。
3. 返回类型 ->（可选）：定义返回值类型，若能推断返回类型，可省略。
4. 函数体 { }：Lambda 的实际代码逻辑。

不同捕获方式:
- 按值捕获（[factor]）：拷贝外部变量值。
- 按引用捕获（[&factor]）：引用外部变量，可以修改原值。
- 全部按值捕获（[=]）：拷贝所有外部变量。
- 全部按引用捕获（[&]）：引用所有外部变量。
```cpp
#include <iostream>
int main() {
    int x = 2, y = 3;

    auto lambdaByValue = [=]() { return x + y; };      // 按值捕获
    auto lambdaByRef = [&]() { x += 1; y += 1; };      // 按引用捕获

    lambdaByRef();  // 修改 x 和 y
    std::cout << lambdaByValue() << std::endl;  // 输出 5（因为按值捕获，不受 lambdaByRef 修改的影响）
    return 0;
}
```
### 🚀 Lambda 表达式的特点
1. 简洁：无需定义独立函数，代码更简洁。
2. 灵活：可在函数内部或表达式中定义临时逻辑。
3. 捕获外部变量：方便地在局部作用域中使用外部变量。
4. 类型推导：通过 auto 关键字自动推断 Lambda 类型。